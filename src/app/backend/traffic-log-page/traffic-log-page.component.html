<div class="dashboard-container">
    <!-- å·¦å´å°èˆª -->
    <div class="sidebar">
        <a href="trafficLogPage">
            <h2>ç®¡ç†å¾Œå°</h2>
        </a>
        <a href="trafficLogPage#card-visitors">
            <div class="nav-link" [class.active]="activeSection === 'visitors'" (click)="showSection('visitors')">
                ğŸ‘¥ è¨ªå®¢çµ±è¨ˆ
            </div>
        </a>
        <a href="trafficLogPage#card-traffic">
            <div class="nav-link" [class.active]="activeSection === 'traffic'" (click)="showSection('traffic')">
                ğŸ“ˆ æµé‡ç´€éŒ„
            </div>
        </a>
        <a href="trafficLogPage#card-faq">
            <div class="nav-link" [class.active]="activeSection === 'faq'" (click)="showSection('faq')">
                ğŸ“‚ FAQ åˆ†é¡
            </div>
        </a>
        <a href="trafficLogPage#card-success">
            <div class="nav-link" [class.active]="activeSection === 'success'" (click)="showSection('success')">
                ğŸ•›é‡æ™‚æ¬¡æ•¸
            </div>
        </a>
        <a href="trafficLogPage#card-unknown">
            <div class="nav-link" [class.active]="activeSection === 'unknown'" (click)="showSection('unknown')">
                â“ æœªçŸ¥å•é¡Œ
            </div>
        </a>
    </div>

    <!-- å³å´å…§å®¹ -->
    <div class="main">
        <div class="dashboard-header">
            <span>ğŸ“Š å„€è¡¨æ¿ç¸½è¦½</span>
            <div class="user-info">ç®¡ç†å“¡ï¼š{{ adminName }} | {{ currentDate }}</div>
        </div>

        <!-- çµ±è¨ˆæ¦‚è¦½ -->
        <div class="stats-row">
            <div class="stat-card" *ngFor="let card of statsCards">
                <div class="stat-number">{{ card.number }}</div>
                <div class="stat-label">{{ card.label }}</div>
            </div>
        </div>

        <!-- è¨ªå®¢çµ±è¨ˆ -->
        <div class="card" id="card-visitors">
            <h3>ğŸ‘¥ è¨ªå®¢ä½¿ç”¨çµ±è¨ˆ</h3>
            <div class="chart-placeholder">é•·æ¢åœ– - ç”¨æˆ¶èº«ä»½åˆ†æ</div>
            <div class="grid-two-col">
                <div class="grid-box">
                    <div class="grid-number">67%</div>
                    <div class="grid-label">ç™»å…¥ç”¨æˆ¶</div>
                </div>
                <div class="grid-box">
                    <div class="grid-number">33%</div>
                    <div class="grid-label">è¨ªå®¢ç”¨æˆ¶</div>
                </div>
            </div>
        </div>

        <!-- æµé‡ç´€éŒ„å€å¡Š -->
        <div class="card-grid">
            <!-- æµé‡ç´€éŒ„ -->
            <div class="card" id="card-traffic">
                <h3>ğŸ“ˆ æµé‡ç´€éŒ„</h3>
                <div class="tabs">
                    <button class="tab" [class.active]="activeTab === 'daily'" (click)="showTab('daily')">
                        æ¯æ—¥ä½¿ç”¨
                    </button>
                    <button class="tab" [class.active]="activeTab === 'hourly'" (click)="showTab('hourly')">
                        æ­·å²ä½¿ç”¨
                    </button>
                </div>

                <div *ngIf="activeTab === 'daily'" class="tab-content active">
                    <div class="chart-placeholder">æŠ˜ç·šåœ– - æ¯æ—¥ä½¿ç”¨æ¬¡æ•¸è¶¨å‹¢</div>
                    <div #chartContainer class="chart-placeholder" style="width:100%; height:400px;"></div>
                    <div class="data-list">
                        <div class="data-item" *ngFor="let item of dailyData">
                            <span>{{ item.login_date }}</span>
                            <strong *ngIf="item.isHighlight; else normalValue">{{ item.login_count }}</strong>
                            <ng-template #normalValue>
                                <span>{{ item.login_count }}</span>
                            </ng-template>
                        </div>
                    </div>
                </div>

                <div *ngIf="activeTab === 'hourly'" class="tab-content active">
                    <!-- <div class="chart-placeholder">
                        é•·æ¢åœ– - æ­·æ™‚ä½¿ç”¨è¶¨å‹¢
                    </div> -->
                    <!-- <div #chart class="chart-placeholder" style="width: 100%; height: 400px;"> -->
                        <!-- é€™è£¡æœƒè¢« ECharts æ¸²æŸ“ -->
                    <!-- </div> -->
                    <!-- <div #chartContainer style="width: 100%; height: 400px;"></div> -->
                    <div #chartContainer class="chart-placeholder" style="width:100%; height:400px;"></div>

                    <!-- <canvas id="myChart"></canvas> -->
                    <!-- <canvas #myChart></canvas> -->
                    <!-- æŠ˜ç·šåœ– canvas -->
                    <div class="data-list">
                        <div class="data-item" *ngFor="let item of hourlyData">
                            <span>{{ item.login_date.split('T')[0] }}</span>
                            <strong *ngIf="item.isHighlight; else normalValue">{{ item.login_count }}æ¬¡</strong>
                            <ng-template #normalValue>
                                <span>{{ item.login_count }}</span>
                            </ng-template>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ åˆ†é¡ -->
            <div class="card" id="card-faq">
                <h3>ğŸ“‚ FAQ åˆ†é¡ç®¡ç†</h3>
                <table>
                    <thead>
                        <tr>
                            <th>åˆ†é¡åç¨±</th>
                            <th>å•é¡Œæ•¸</th>
                            <th>ä½¿ç”¨ç‡</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let category of faqCategories">
                            <td>{{ category.categoryName }}</td>
                            <td>{{ category.itemCount }}</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" [style.width.%]="category.usageRate"></div>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-secondary" (click)="onButtonClick('ç·¨è¼¯')">ç·¨è¼¯</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- æˆåŠŸç‡ -->
            <div class="card" id="card-success">
                <h3>ğŸ•›å›ç­”é‡æ™‚æ¬¡æ•¸è¿½è¹¤</h3>
                <div class="chart-placeholder">æŠ˜ç·šåœ– - é‡æ™‚æ¬¡æ•¸åˆ†æ</div>
                <div class="success-rate">
                    <div class="grid-box">
                        <div class="grid-number">94%</div>
                        <div class="grid-label">æ•´é«”é‡æ™‚ç‡</div>
                    </div>
                </div>
            </div>

            <!-- æœªçŸ¥å•é¡Œ -->
            <div class="card" id="card-unknown">
                <h3>â“ æœªçŸ¥å•é¡Œæ”¶é›†</h3>
                <div class="btn-group">
                    <button class="btn btn-primary" (click)="onButtonClick('åŒ¯å‡ºæ¸…å–®')">åŒ¯å‡ºæ¸…å–®</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>å•é¡Œå…§å®¹</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let question of unknownQuestions">
                            <td>{{ question.msg }}</td>
                            <td>
                                <button class="btn btn-secondary" (click)="onButtonClick('åŠ å…¥FAQ')">FAQ</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>